
---
#### 구간 합
- 구간 합은 합 배열을 이용하여 시간 복잡도를 더 줄이기 위해 사용하는 특수한 목적의 알고리즘입니다.
#### 구간 합의 핵심 이론
- 합 배열 S 정의
	```python
	S[i] = A[0] = A[1] + A[2] + ... + A[i-1] + A[i] # A[0]부터 A[i]까지의 합
	```
	
- 합 배열 S를 만드는 공식
	```python
	S[i] = S[i-1] + A[i]
	```
	
- 구간 합을 구하는 공식
	```python
	S[j] - S[i-1] # i에서 j까지 구간 합
	```
	
- A[2] ~ A[5] 구간 합을 합 배열로 구하는 과정
	```python
	S[5] = A[0] + A[2] + A[3] + A[4] + A[5] 
	S[1] = A[0] + A[1]
	S[5] - S[1] = A[2] ~ A[5]
```
---
>[!<문제3> 구간 합 구하기 1]
>수 N개가 주어졌을 때 i번째 수에서 j번째 수까지의 합을 구하는 프로그램을 작성하시오.
>###### <입력>
>	첫째 줄에 수의 개수 N과 합을 구해야 하는 횟수 M이 주어진다. 둘째 줄에는 N개의 수가 주어진다. 수는 1,000보다 작거나 같은 자연수이다. 셋째 줄부터 M개의 줄에는 합을 구해야 하는 구간 i와 j가 주어진다.
>###### <출력>
>	총 M개의 줄에 입력으로 주어진 i번째 수에서 j번째 수까지의 합을 출력한다.
>```python
># 예제 입력
>5 3           # 데이터의 개수, 질의 개수
>5 4 3 2 1     # 구간 합을 구할 대상 배열
>1 3
>2 4
>5 5
>
># 예제 출력
>12
>9
>1
>```

```python
'''  
<슈도코드 작성>  
suNo(숫자 개수), quizNo(질의 개수)  
numbers 변수에 숫자 데이터 저장  
prefix_sum 합 배열 변수 선언  
temp 변수 선언  
  
for 저장한 숫자 데이터 차례대로 탐색:  
    temp에 현재 숫자 데이터 더해 주기  
    합 배열에 temp값 저장  
  
for 질의 개수만큼 반복:  
    질의 범위 받기(s ~ e)  
    구간 합 출력하기(prefix_sum[e] - prefix_sum[s-1])  
'''  
import sys  
  
# 코드 구현  
input = sys.stdin.readline  
suNo, quizNo = map(int, input().split())  
numbers = list(map(int, input().split()))  
prefix_sum = [0]  
temp = 0  
  
for i in numbers:  
    temp += i  
    prefix_sum.append(temp)                 # 합 배열 만들기  
  
for i in range(quizNo):  
    s, e = map(int, input().split())  
    print(prefix_sum[e]-prefix_sum[s-1])    # 합 배열에서 구간 합 구하기
```
---
>[!<문제4> 구간 합 구하기2]
>N×N개의 수가 N×N 크기의 표에 채워져 있다. (x1, y1)부터 (x2, y2)까지 합을 구하는 프로그램을 작성하시오. (x, y)는 x행 y열을 의미한다.
>예를 들어, N = 4이고, 표가 아래와 같이 채워져 있는 경우를 살펴보자.
>
>| 1   | 2   | 3   | 4   |
>| --- | --- | --- | --- |
>| 2   | 3   | 4   | 5   |
>| 3   | 4   | 5   | 6   |
>| 4   | 5   | 6   | 7   |
>
>여기서 (2, 2)부터 (3, 4)까지 합을 구하면 3+4+5+4+5+6 = 27이고, (4, 4)부터 (4, 4)까지 합을 구하면 7이다.
>표에 채워져 있는 수와 합을 구하는 연산이 주어졌을 때, 이를 처리하는 프로그램을 작성하시오.
>###### <입력>
>첫째 줄에 표의 크기 N과 합을 구해야 하는 횟수 M이 주어진다. (1 ≤ N ≤ 1024, 1 ≤ M ≤ 100,000) 둘째 줄부터 N개의 줄에는 표에 채워져 있는 수가 1행부터 차례대로 주어진다. 다음 M개의 줄에는 네 개의 정수 x1, y1, x2, y2 가 주어지며, (x1, y1)부터 (x2, y2)의 합을 구해 출력해야 한다. 표에 채워져 있는 수는 1,000보다 작거나 같은 자연수이다. (x1 ≤ x2, y1 ≤ y2)
>###### <출력>
>총 M줄에 걸쳐 (x1, y1)부터 (x2, y2)까지 합을 구해 출력한다.
>```python
># 예제 입력  
>4 3         # 2차원 배열의 크기, 구간 합 질의의 개수  
>1 2 3 4     # 원본 배열 1번째 줄  
>2 3 4 5     # 원본 배열 2번째 줄  
>3 4 5 6     # 원본 배열 3번째 줄  
>4 5 6 7     # 원본 배열 4번째 줄  
>2 2 3 4     # 구간 합(X1, Y1), (X2, Y2) 1번째 질의  
>3 4 3 4     # 구간 합(X1, Y1), (X2, Y2) 2번째 질의  
>1 1 4 4     # 구간 합(X1, Y1), (X2, Y2) 3번째 질의  
>  
># 예제 출력  
>27  
>6  
>64
>```

```python
'''  
<슈도코드 작성>  
n(리스트 크기) m(질의 수)  
A(원본 리스트), D(합 배열)  
  
for n만큼 반복:  
    원본 리스트 데이터 저장  
  
for i를 1부터 n까지 반복:  
    for j를 1부터 n까지 반복:  
        합 배열 저장  
        D[i][j] = D[i][j-1] + D[i-1][j] - D[i-1][j-1] + A[i][j]  
for m만큼 반복:  
    질의에 대한 결과 계산 및 출력  
    결과 = D[x2][y2] - D[x1-1][y2] - D[x2][y1-1] + D[x1-1][y1-1]'''  
import sys  
  
# 코드 구현  
input = sys.stdin.readline  
n, m = map(int, input().split())  
A = [[0] * (n+1)]  
D = [[0] * (n+1) for _ in range(n+1)]  
  
for i in range(n):  
    A_row = [0] + [int(x) for x in input().split()]  
    A.append(A_row)  
  
for i in range(1, n+1):  
    for j in range(1, n+1):  
        # 합 배열 구하기  
        D[i][j] = D[i][j-1] + D[i-1][j] - D[i-1][j-1] + A[i][j]  
  
for _ in range(m):  
    x1, y1, x2, y2 = map(int, input().split())  
    # 구간 합 배열로 질의에 답변  
    result = D[x2][y2] - D[x1-1][y2] - D[x2][y1-1] + D[x1-1][y1-1]  
    print(result)
```
---
