
---
## 1. 메모리 계층 구조와 메모리 관리 핵심
#### 메모리 계층 구조와 특성
![[Pasted image 20241111095511.png]]
- 메모리는 컴퓨터 시스템 여러 곳에 계층적으로 존재 
	- CPU 레지스터 – CPU 캐시 – 메인 메모리(RAM) – 보조기억장치(DISK)
	- CPU 레지스터에서 보조기억장치로 갈수록 
		- 용량 증가, 가격 저렴, 속도 저하 
	- 메모리 계층 구조의 중심 – 메인 메모리
- 메모리 계층화의 목적 
	- CPU의 메모리 액세스 시간을 줄이기 위함 
		- 빠른 프로그램 실행을 위해
- 메모리 계층화 성공 이유
	- 참조의 지역성 때문 
		- 코드나 데이터, 자원 등이 아주 짧은 시간 내에 다시 사용되는 특성 -> CPU는 작은 캐시 메모리에 적재된 코드와 데이터로 한동안 실행 
		- 캐시를 채우는 시간의 손해보다 빠른 캐시를 이용하는 이득이 큼

#### 메모리 관리
- 메모리의 역할 
	- 메모리는 실행하고자 하는 프로그램 코드와 데이터 적재 
	- CPU는 메모리에 적재된 코드와 데이터만 처리 
- 운영체제에 의해 메모리 관리가 필요한 이유 
	- 메모리는 **공유 자원이기 때문**  
		- 여러 프로세스 사이에 메모리 공유 
		- 각 프로세스에게 물리 메모리 할당 
	- 메모리 **보호되어야 하기 때문**
		- 프로세스의 독립된 메모리 공간 보장 
			- 다른 프로세스로부터 보호 
		- 사용자 코드로부터 커널 공간 보호 
	- 메모리 **용량 한계 극복할 필요** 
		- 설치된 물리 메모리보다 큰 프로세스 지원 필요 
		- 여러 프로세스의 메모리 합이 설치된 물리 메모리보다 큰 경우 필요 
	- 메모리 **효율성 증대를 위해** 
		- 가능하면 많은 개수의 프로세스를 실행시키기 위해

## 2. 메모리 주소




#### ==홀 선택 알고리즘 (시험)==
![[Pasted image 20241118091851.png]]
- 운영체제는 할당 리스트(allocation list) 유지 
	- 할당된 파티션에 관한 정보 유지 관리 
		- 할당된 위치, 크기, 비어 있는지 유무 
- 할당 요청에 대해, 운영체제의 홀 선택 전략 3가지 
	- first-fit(최초 적합) 
		- 홀 리스트를 검색하여 처음으로 만나는, 요청 크기보다 큰 홀 선택 
		- 할당 속도 빠름/단편화 발생 가능성 
	- best-fit(최적 적합) 
		- 홀 리스트를 검색하여 요청 크기를 수용하는 것 중, 가장 작은 홀 선택 
		- 크기 별로 홀이 정렬되어 있지 않으면 전부 검색 
	- worst-fit(최악 적합) 
		- 홀 리스트를 검색하여 요청 크기를 수용하는 것 중, 가장 큰 홀 선택 
		- 크기 별로 홀이 정렬되어 있지 않으면 전부 검색

## 5. 세그먼테이션 메모리 관리
#### 세그먼테이션(segmentation) 개요
- 세그먼트(segment) 
	- 세그먼트는 프로그램을 구성하는 논리적 단위, 세그먼트마다 크기 다름 
	- 일반적인 세그먼트 종류 
		- 코드 세그먼트 
		- 데이터 세그먼트 
		- 스택 세그먼트 
		- 힙 세그먼트 
- 세그먼테이션 기법 
	- 프로세스를 논리 세그먼트들로 나누고, 각 논리 세그먼트를 물리 메모리(물리 세그먼트)에 할당하는 메모리 관리 기법 
	- 프로세스의 주소 공간 
		- 프로세스의 주소 공간은 여러 개의 논리 세그먼트들로 구성 
		- 각 논리 세그먼트는 물리 세그먼트에 매핑 
		- 프로세스를 논리 세그먼트로 나누는 과정은 컴파일러와 링커에 의해 이루어짐 
			- 컴파일러와 링커는 응용프로그램과 라이브러리의 코드를 모아 코드 세그먼트 구성, 전역변수들을 모아 데이터 세그먼트 구성 
			- 운영체제 로더는 실행 파일에 구성된 각 논리 세그먼트를 물리 세그먼트에 할당, 논리 세그먼트 적재 
	- 논리 세그먼트와 물리 세그먼트의 매핑 
		- 시스템 전체에 1개의 세그먼트 테이블을 두고 논리 주소를 물리 주소로 변환 
	- 외부 단편화 발생

#### 세그먼테이션의 구현
1. 하드웨어 지원 
	-  논리 주소 구성 : [세그먼트 번호, 옵셋] 
		-  옵셋 : 세그먼트내 상대 주소 
	-  CPU
		-  세그먼트 테이블의 시작 주소를 가리키는 레지스터(segment table base register) 필요 
	-  MMU 장치 
		-  논리 주소를 물리 주소로 변환하는 장치 
		-  논리 주소가 세그먼트 범위를 넘는지 판별(메모리 보호) 
		-  논리 주소의 물리 주소 변환(메모리 할당) 
	-  세그먼트 테이블 
		-  메모리에 저장
		-  세그먼트별로 시작 물리 주소와 세그먼트 크기 정보 
2. 운영체제 지원 
	-  세그먼트의 동적 할당/반환 및 세그먼트 테이블 관리 기능 구현 
		-  프로세스의 생성/소멸에 따라 동적으로 세그먼트 할당/반환 
		-  물리 메모리에 할당된 세그먼트 테이블과 자유 공간에 대한 자료 유지 
		-  컨텍스트 스위칭 때 CPU의 레지스터에 적절한 값 로딩
3. 컴파일러, 링커, 로더 지원 
	-  사용자 프로그램을 세그먼트 기반으로 컴파일, 링킹, 로딩

#### 단편화
- 외부 단편화 발생 
	- 세그먼트들의 크기가 같지 않기 때문에 세그먼트와 세그먼트 사 이에 발생하는 작은 크기의 홀 
- 내부 단편화 발생 없음