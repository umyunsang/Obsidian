
---
## 컴퓨터 하드웨어 구성

![[Pasted image 20240909093327.png]]
- CPU(Central Processing Unit) 
	- 프로그램 코드(기계 명령)를 해석하여 실행하는 중앙처리장치 
	- 컴퓨터의 가장 핵심 장치 
	- 전원이 공급될 때 작동 시작, 메모리에 적재된 프로그램 실행 
- 메모리 
	- CPU에 의해 실행되는 프로그램 코드와 데이터가 적재되는 공간 
	- 반도체 메모리 RAM 
	- 프로그램은 실행되기 위해 반드시 메모리에 적재되어야 함 
- 캐시 메모리(Cache Memory) 
	- CPU 처리속도가 메모리 속도에 비해 빠르게 발전 -> 느린 메모리 때문에 CPU의 대기 시 간이 늘게 되었음 
	- CPU의 프로그램 실행 속도를 높이기 위해, CPU와 메모리 사이에 소량의 빠른 메모리(고가의 메모리)를 설치하게 되었음 
- 온칩 캐시(on-chip) – CPU 내부에 만들어진 캐시, 오늘날 대부분 온칩 캐시 
- 옵칩 캐시(off-chip) – CPU 외부에 설치되는 캐시 
- 캐시 메모리가 있는 경우 CPU는 캐시 메모리에서만 프로그램 실행 
	- 실행하고자하는 프로그램과 데이터는 메모리에 먼저 적재되고 다시 캐시로 옮겨져야 함 
	- 캐시는 용량이 작기 때문에 현재 실행할 코드와 데이터의 극히 일부분만 저장
- 버스(bus) 
	- 하드웨어들이 데이터를 주고받기 위해 0과 1의 디지털 신호가 지나가는 여 러 가닥의 선을 다발로 묶어 부르는 용어 
	 - 버스의 종류(버스에 지나다니는 정보에 따라) 
		 - 주소 버스(address bus) - 주소 신호가 지나다니는 버스(도로) 
		 - 데이터 버스(data bus) - 데이터 신호가 지나다니는 버스(도로) 
		 - 제어 버스(control bus) - 제어 신호가 지나다니는 버스(도로) 
	- 주소 
		- 메모리, 입출력 장치나 저장 장치 내에 있는 저장소(레지스터들)에 대한 번지 
		- 0번지에서 시작하는 양수 
		- 주소 버스는 주소 값이 전달되는 여러 선의 다발 
		- CPU는 메모리나 입출력 장치에 값을 쓰거나 읽을 때 반드시 주소를 발생시킴
	- 시스템 버스(system bus) 
		- CPU, 캐시 메모리, 메모리 등 빠른 하드웨어들 사이에 데이터 전송 
		- 고속도로에 비유 
	- 입출력 버스(I/O bus) 
		- 상대적으로 느린 입출력 장치들로부터 입출력 데이터 전송 
		- 일반 도로에 비유
- I/O controllers & control circuit 
	- 입출력 장치들을 제어하기 위한 여러 하드웨어 
		- 입출력 장치에게 명령 하달 
		- 메모리와 입출력 장치 사이에 혹은 CPU와 입출력 장치 사이에 데이터 전달 중계
		- DMAC(Direct Memory Access Controller

#### 컨텍스트(Context)
- 컨텍스트(문맥이라고도 표현)
	- 한 프로그램이 실행 중인 일체의 상황 혹은 상황 정보
		- 메모리
			- 프로그램 코드와 데이터, 스택, 동적할당 받아 저장한 값
		- CPU 레지스터들의 값
			- PC에는 코드의 주소
			- SP에는 스택의 주소
			- 다른 레지스터는 이전의 실행 결과나 현재 실행에 사용되는 데이터 들
	- 축소 정의
		- 현재 CPU에 들어 있는 레지스터의 값들
			- 메모리에 저장된 상황 정보는 그대로 있다
- 컨텍스트 스위칭
	- 발생
		- CPU가 현재 프로그램의 실행을 중지하고 다른 프로그램을 실행할 때
	- 과정
		- 현재 실행중인 프로그램의 컨텍스트(CPU레지스터들의 값)를 메모리에 저장
		- 새로 실행시킬 프로그램의 저장된 컨텍스트(CPU레지스터들의 값)를 CPU에 복귀

## 2. 컴퓨터 시스템의 계층 구조와 운영체제 인터페이스
#### 컴퓨터 시스템 계층 구조
![](../../../../image/Pasted%20image%2020240911104956.png)
- 응용프로그램이 하드웨어를 사용하고자 할 때 
	- 반드시 운영체제에게 요청 -> 운영체제가 대신하여 하드웨어 조작 
	- 유일한 요청 방법 – ==시스템 호출(system call)==

#### 운영체제의 전체 기능
- 프로세스와 스레드 관리 
	- 프로세스/스레드의 실행, 일시 중단, 종료, 스케줄링, 컨텍스트 스위칭, 동기화 
- 메모리 관리 
	- 프로세스나 스레드에게 메모리 할당, 메모리 반환, 다른 프로세스/스레드로부터의 메모리 보호 
	- 메모리를 하드 디스크의 영역까지 확장하는 가상 메모리 기술 
- 파일 관리 혹은 파일 시스템 관리 
	- 파일 생성, 저장, 읽기, 복사, 삭제, 이동, 파일 보호 
- 장치 관리 
	- 키보드, 마우스, 프린터 등 입출력 장치, 하드 디스크 등 저장 장치 제어 
	- 입출력 
- 사용자 인터페이스 
	- 라인 기반 명령 입출력 창, 마우스와 그래픽 사용 GUI 인터페이스 제공 
- 네트워킹 
	- 네트워크 인지, 연결, 닫기, 데이터 송수신 
- 보호 및 보안 
	- 바이러스나 웜, 멀웨어(malware), 해킹 등의 외부 공격이나 무단 침입으로부터 보호

#### 운영체제 커널 인터페이스 : 시스템 호출과 인터럽트
- 커널이 제공하는 2개 인터페이스 : 시스템 호출과 인터럽트 
	- 응용프로그램과 하드웨어 사이의 중계 역할 
- 시스템 호출(system call) 
	- 커널과 응용프로그램 사이의 인터페이스 
	- 응용프로그램에서 커널 기능을 사용할 수 있는 유일한 방법 
	- 시스템 호출 라이브러리를 통해 다양한 시스템 호출 함수 제공 
		- 시스템 호출 라이브러리는 운영체제 패키지에 포함됨 
		- 예) 파일 읽기, 메모리 할당, 프로세스 정보 보기, 프로세스 생성 등
- 인터럽트(interrupt) 
	- 커널과 하드웨어 장치 사이의 인터페이스 
	- 장치들이 입출력 완료, 타이머 완료 등을 CPU에게 알리는 하드웨어적 방법 
		- 인터럽트를 알리는 하드웨어 신호가 직접 CPU에 전달 
	- 인터럽트가 발생하면 
		- CPU는 하는 일을 중단하고 인터럽트 서비스 루틴 실행 
		- 인터럽트 서비스 루틴은 대부분 디바이스 드라이버 내에 있음 
			- 예) 키를 입력하면 커널의 키보드 인터럽트 서비스 루틴 실행, 키를 읽어 커널 버퍼에 저장 
		- 인터럽트 서비스 루틴은 커널 영역에 적재 
		- 인터럽트 서비스 루틴의 실행을 마치면 하던 작업 계속 

## 3. 커널과 시스템 호출

#### 사용자 공간과 커널 공간
- 운영체제는 컴퓨터 메모리를 두 공간으로 분리 
	- 사용자 공간(user space) : 모든 응용프로그램들이 나누어 사용하는 공간 
		- 응용프로그램들이 적재되는 공간 
	- 커널 공간(kernel space) : 커널만 사용할 수 있는 공간 
		- 커널 코드, 커널 데이터 등 커널에 의해 배타적으로 사용되는 공간 
		- 디바이스 드라이버 포함 
- 분리 이유 
	- 커널 코드와 데이터를 악의적인 응용프로그램이나 코딩 실수로부터 지키기 위함

#### 사용자 모드와 커널 모드
- CPU는 사용자 모드와 커널 모드 중 한 모드로 실행 
	- CPU 내부에 모드 상태를 나타내는 ‘모드 레지스터’ 있음 
- 사용자 모드(user mode) 
	- CPU의 모드 비트 = 1 
	- CPU는 사용자 공간에 있는 코드나 데이터를 액세스하는 중 
	- CPU의 커널 공간 접근 불허 -> 응용프로그램으로부터 커널영역 보호 
	- ==특권 명령==(privileged instruction) 실행 불허 
		- 특권 명령 – 입출력 장치 등 하드웨어나 시스템 중단 등 시스템 관련 처리를 위해 설계된 특별한 명령 
- 커널 모드(kernel mode, supervisor mode) 
	- CPU의 모드 비트 = 0 
	- CPU가 커널 공간에서 실행하는 중, 혹은 사용자 코드를 실행하는 중 
	- 특권 명령 사용 가능
	![](../../../../image/Pasted%20image%2020240911113952.png)