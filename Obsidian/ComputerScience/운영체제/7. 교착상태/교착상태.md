
---
데드락 회피는 기말문제 무조건 나옴

## 3-3 교착 상태 회피
#### 교착 상태 회피의 개념
- 프로세스에 자원을 할당할 때 어느 수준 이상의 자원을 나누어주면 교착 상태가 발생하는지 파악하여 그 수준 이하로 자원을 나누어주는 방법 
- 교착 상태가 발생하지 않는 범위 내에서만 자원을 할당하고, 교착 상태가 발생하는 범위에 있으면 프로세스를 대기시킴 
- 즉, 할당되는 자원의 수를 조절하여 교착 상태를 피함

#### 안정 상태와 불안정 상태
- 교착 상태 회피는 자원의 총수와 현재 할당된 자원의 수를 기준으로 시스템을 안정 상태와 불안정 상태로 나누고 시스템이 안정 상태를 유지하도록 자원을 할당 
- 할당된 자원이 적으면 안정 상태가 크고, 할당된 자원이 늘어날수록 불안정 상태가 커짐 
- 교착 상태는 불안정 상태의 일부분 이며, 불안정 상태가 커질수록 교착 상태가 발생할 가능성이 높아짐 
- 교착 상태 회피는 안정 상태를 유지할 수 있는 범위 내에서 자원을 할당함으로써 교착 상태를 피함

#### 은행원 알고리즘
- 교착 상태 회피를 구현하는 대표적인 알고리즘 
- 은행이 대출을 해주는 방식, 즉 대출 금액이 대출 가능한 범위 내이 면(안정 상태이면) 허용되지만 그렇지 않으면 거부되는 것과 유사한 방식

![[Pasted image 20241111090811.png]]

#### 은행원 알고리즘에서 자원 할당 기준
- 요청한 자원을 할당해 준 뒤에도 시스템이 안정상태에 있다면 그 요청을 수락한다
- 안정상태: 시스템이 안정순서(safe sequence)를 가질 때 안정상태에 있다고 말함 
- Safe sequence: 각 프로세스의 Need를 어떤 순서대로 만족시켜 줄 수 있을 때, 그 순서를 safe sequence 라 부른다.

![[Pasted image 20241111091225.png]]
- Need = Max - Alloc
- p0는 wait
- p1의 요청은 들어줌 -> p1이 종료를 하면 -> p1이 가지고 있는 max 자원을 반환함
- 332(available) - 122(need) + 322(max) = 532(available)
- p1p3p0p2p4 순으로 처리 됨


