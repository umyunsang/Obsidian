
---
## 1. 전송 계층 관련 프로토콜 분석
#### TCP 헤더 분석
- 전송계층이 해야 할 일 (TCP 헤더에 모두 있음)
	![](../../../../image/Pasted%20image%2020241202153250.png)
	- 다양한 응용 프로그램들이 인터넷을 사용할 수 있는 **멀티 인터페이스**(TSAP)를 제공
	- 전송된 **데이터의 무결성**을 보장
	- 네트워크의 상태는 매우 유동적이기 때문에 이에 맞추어 **혼잡 제어**
	- 연결을 설정하는 문제와 해제하는 문제를 담당
- 전송계층이 해야 하는 대표적인 작업을 담당하는 프로토콜이 TCP(Transmission Control Protocal)
- 응용 프로그램이 소켓을 통해 인터넷으로 전달할 데이터를 보내면 TCP는 TCP 헤더를 붙여서 IP로 내려 보냄
- IP는 IP 헤더를 붙여 이더넷으로 내려 보내면 이더넷이 데이터를 전송.
	![](../../../../image/Pasted%20image%2020241202153825.png)
- TCP 헤더는 IP헤더와 마찬가지로 32비트(4바이트)를 기준으로 나눔 -> TCP 헤더의 필수 부분은 5 x 4바이트 = 20바이트, 옵션은 없을 수 있으며, 있더라도 4바이트씩 증가

![](../../../../image/Pasted%20image%2020241202154344.png)
![](../../../../image/Pasted%20image%2020241202154818.png)
- TCP를 사용하는 모든 응용 프로그램들이 포트를 사용하여 구분되기 때문에 **보내는 쪽 포트**(Source Port)와 **받는 쪽 포트**(Destination Port) 둘 다 표시하여 보냄
- TCP의 구조상, 받는 쪽 포트를 알아야지만 데이터를 보낼 수 있음
	- 받는 쪽의 응용 프로그램이 웹 데몬(HTTPD)와 같이 잘 알려진 소프트웨어라면 0에서 1023번 까지의 well-known 포트 번호를 가지고 있음
- 포트번호의 길이는 16비트이다. 따라서 0에서 65535까지의 포트번호를 가짐
- 일반적인 응용 프로그램이라면 1024번 이상 65535이하의 임의의 값을 포트번호로 할당 받음

![](../../../../image/Pasted%20image%2020241202154835.png)
- 네트워크에서 데이터를 전송하는 과정에서 순서가 **뒤바뀌거나 사라지는 문제**가 발생.
- 데이터 전송에는 2번줄 Sequence Number(일련번호)와 3번줄 Acknowledge Number(ACK 번호)를 사용
- 일련번호와 ACK 번호는 연결을 설정하고 해제하는데도 사용
- 컴퓨터가 켜진 후 꺼질 때 까지 무수히 많은 수의 데이터를 전송하기 때문에 일련번호와 ACK 번호는 충분히 커야 함
- 일련번호와 ACK 번호에 32비트를 할당하였기 때문에 0부터 $2^{32}$ - 1까지, 약 42억개의 번호를 사용 할 수 있음.
![](../../../../image/Pasted%20image%2020241202154855.png)
![](../../../../image/Pasted%20image%2020241202154911.png)