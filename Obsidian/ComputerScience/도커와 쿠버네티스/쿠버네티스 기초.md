
---
#### Pod 상태 확인 명령어
```shell
# pod 정보
kubectl get po
# pod ip 정보
kubectl get po -o wide
# Pod 상세 정보
kubectl describe pod <pod-name>
# Pod 로그 확인
kubectl logs <pod-name>
```

| **상태**                | **설명**                                           |
| --------------------- | ------------------------------------------------ |
| **Pending**           | Pod이 Master Node에 전달되었으나, 특정 Node에 스케줄링되지 않은 상태. |
| **ContainerCreating** | 특정 Node에 스케줄링 후, 컨테이너를 생성 중인 상태.                 |
| **Running**           | Pod이 정상적으로 생성되어 모든 컨테이너가 실행 중인 상태.               |
| **Completed**         | 모든 컨테이너가 정상적으로 실행 완료 후 종료된 상태.                   |
| **Error**             | Pod 또는 컨테이너 실행 중 문제가 발생한 상태.                     |
| **CrashLoopBackOff**  | 컨테이너가 실행 중 반복적으로 실패하며 재시작을 시도하는 상태.              |

---
#### 파드의 Restart 정책
- **`Always`** (기본값): 항상 재시작. 서비스형 애플리케이션에 적합.
- **`OnFailure`**: 실패 시에만 재시작. 배치 작업에 적합.
- **`Never`**: 종료 후 재시작 안 함. 단발성 작업에 적합.

```yaml
apiVersion: v1
kind: Pod
metadata:
  name: example-pod
spec:
  # 컨테이너가 비정상 종료될 때만 재시작
  restartPolicy: OnFailure
  containers:
  - name: example-container
    image: busybox
    command: ["sh", "-c", "echo Hello Kubernetes; exit 1"]
```
- `restartPolicy`는 Pod 레벨에서만 설정 가능.
- 기본값은 `Always`이므로 필요에 따라 수정해야 함.
---
#### 파드 내부 컨테이너를 조작하는 명령어
```bash
# 파드 내부로 접속 (쉘 실행)
kubectl exec -it <파드이름> -- /bin/bash

# 파드 내부에서 명령 실행 (예: /etc 디렉토리 내용 확인)
kubectl exec <파드이름> -- ls /etc

# 멀티컨테이너 파드에서 특정 컨테이너 지정해 명령 실행
kubectl exec -it <파드이름> -c <컨테이너이름> -- /bin/bash

# 로컬 파일을 파드 내부로 복사
kubectl cp /tmp/file.txt <파드이름>:/etc/

# 파드 내부의 파일을 로컬로 복사
kuberctl cp <파드이름>:/path /path

# 파드의 컨테이너 로그 확인
kubectl logs <파드이름>
kubectl logs <파드이름> -c <컨테이너이름> # 특정 컨테이너 로그

# 파드 상태 자세히 확인
kubectl describe pod <파드이름>
```
---
###### Quiz1. www 라는 이름으로 pod를 생성하시고, 이때 사용되는 이미지는 nginx:1.12, 현재 디렉토리에 index.html 파일을 만들고, 해당 파일을 www pod의 /usr/share/nginx/html 디렉토리로 복사하여, 기본 웹페이지를 변경하세요.

>[! www pod를 생성하기]
1. yaml 파일을 이용해 생성하기
```yaml
apiVersion: v1
kind: Pod
metadata:
  name: www
spec:
  containers:
  - name: www
    image: nginx:1.12
```
```bash
kubectl apply -f www.yaml    # www pod 생성 명령어
```
2. run 명령어로 생성
```bash
kubectl run www --image nginx:1.12
```

>[!index.html 생성 후 pod로 전송]
```bash
echo hello > index.html
kubectl cp ./index.html www:/usr/share/nginx/html
```
###### Quiz2. 해당 pod의 ip 주소를 확인하여 master에서 curl ip주소로 웹페이지를 확인해 봅니다.

>[! IP확인 후 curl로 html 열기]
```bash
# ip 주소 확인
kubectl get po -o wide
curl http://0.0.0.0
```
---
