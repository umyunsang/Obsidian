
---
![[Pasted image 20240605150904.png]]


---
![[Pasted image 20240605150923.png]]

```java
import java.time.LocalDateTime;

@Entity
public class member {
	@Id public String id;
	public String pw;
	public String name;
	public Integer mileage;
	@CreationTimestamp
	public LocalDateTime rdate;
}
```
---
![[Pasted image 20240605150949.png]]

```java

public interface memberRep extends JpaRepository<member, String> {
	@Query("select count(id) from member")
	int memberCount ();
}
```
---
![[Pasted image 20240605151030.png]]

```java

@Controller
public class MyController {
	@Autowired
	private memberRep mrep;
}
```
---
![[Pasted image 20240605151520.png]]

```html
<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org"> 
<head><meta charset="UTF-8"><title>회원 가입</title> 
<style> 
body {background-color:#F8ECE0; } 
fieldset {background-color:#F8ECE0; }
button {margin-left:20px; } 
</style></head> 
<body> 
<form method="get" action="/member/insert"><p> 
<fieldset> 
<legend><strong>회원 정보를 입력하세요</strong></legend><br> 
<table> 
<tr> <td>ID <td><input type="text" name="id" required> 
<tr> <td>PW <td><input type="text" name="pw" required> 
<tr> <td>이름<td><input type="text" name="name" required>
<tr> <td>폰 <td><input type="text" name="phone" required> 
</table><br>
</fieldset> <br>
<a href="login">취소(로그인 화면으로)</a>
<input type="submit" value="등록">
</form> 
</body></html>
```

```java
@GetMapping("/member")
public String member() {
	return "member";
}
```
---
![[Pasted image 20240605151939.png]]

```java
@GetMapping("/member/insert") 
public String memberInsert( @RequestParam("id") String id, 
						    @RequestParam("pw") String pw,
							@RequestParam("name") String name,
							@RequestParam("phone") String phone,
							RedirectAttributes re) {
	 if(mrep.existsById(id)) { 
		re.addAttribute("msg", id+"는 이미 사용되고 있는 아이디입니다.");
		re.addAttribute("url", "back"); 
	} 
	else { 
		member m = new member(); 
		m.id = id; 
		m.pw = pw; 
		m.name = name; 
		m.phone = phone; 
		m.mileage = 0; ;
		
		mrep.save(m);
		re.addAttribute("msg", id+"님, 반갑습니다!! (로그인 화면으로 이동)"); 
		re.addAttribute("url", "/login"); 
	} 
	return "redirect:/popup";
}
```

---
![[Pasted image 20240605152840.png]]

```html
<!DOCTYPE html> 
<html xmlns:th="http://www.thymeleaf.org"> 
<head><meta charset="UTF-8"> 
<title>안내글</title></head> 
<body> 
<script th:inline="javascript"> 
	m = [[${msg}]]; 
	u = [[${url}]]; 
	alert(m); 
	if(u == 'back') 
		history.back(); 
	else a.href = u; 
</script> 
</body> </html>
```
```java
@GetMapping("/popup") 
public String popup(@RequestParam("msg") String msg, 
					@RequestParam("url") String url, Model mo) { 
	mo.addAttribute("msg",msg); 
	mo.addAttribute("url",url); 
	return "popup"; 
}
```